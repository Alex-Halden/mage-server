<link rel="stylesheet" type="text/css" href="http://extjs.cachefly.net/ext-3.4.0/resources/css/ext-all.css" />
<link rel="stylesheet" type="text/css" href="http://extjs.cachefly.net/ext-3.4.0/examples/shared/examples.css" />

<script type="text/javascript" src="http://extjs.cachefly.net/ext-3.4.0/adapter/ext/ext-base.js"></script>
<script type="text/javascript" src="http://extjs.cachefly.net/ext-3.4.0/ext-all.js"></script>
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<!--<script src='http://maps.google.com/maps?file=api&amp;v=3.2&amp;key=AIzaSyDBrM3tImC7V3T6IoDCZD_4_nF5eGusfHM'></script>-->
<script src='http://www.openlayers.org/dev/OpenLayers.js'></script>

<script type="text/javascript" src="geoext/script/GeoExt.js"></script>



<script>

var mapPanel;

Ext.onReady(function() {


	map = new OpenLayers.Map('map', {
		controls: [
			new OpenLayers.Control.Navigation(),
			new OpenLayers.Control.PanZoomBar(),
			new OpenLayers.Control.LayerSwitcher({'ascending':false}),
			new OpenLayers.Control.Permalink(),
			new OpenLayers.Control.ScaleLine(),
			//new OpenLayers.Control.Permalink('permalink'),
			new OpenLayers.Control.MousePosition(),
			//new OpenLayers.Control.OverviewMap(),
			new OpenLayers.Control.KeyboardDefaults()
		]
	}); 

var gphy = new OpenLayers.Layer.Google(
    "Google Physical",
    {type: google.maps.MapTypeId.TERRAIN}
    // used to be {type: G_PHYSICAL_MAP}
);

// create Google Mercator layers
var gmap = new OpenLayers.Layer.Google(
    "Google Streets",
    {'sphericalMercator': true,
     'maxExtent': new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34)
    }
);
var ghyb = new OpenLayers.Layer.Google(
    "Google Hybrid",
    {type: google.maps.MapTypeId.HYBRID, numZoomLevels: 20}
    // used to be {type: G_HYBRID_MAP, numZoomLevels: 20}
);
var gsat = new OpenLayers.Layer.Google(
    "Google Satellite",
    {type: google.maps.MapTypeId.SATELLITE, numZoomLevels: 22}
    // used to be {type: G_SATELLITE_MAP, numZoomLevels: 22}
);

	var state = new OpenLayers.Layer.ArcGIS93Rest("US States & Counties", "http://sampleserver1.arcgisonline.com/ArcGIS/rest/***REMOVED***s/Specialty/ESRI_StateCityHighway_USA/MapServer/export", {
		layers: "show:2",
		transparent:true,
		isBaseLayer:false
	});
	state.setVisibility(false);
	
	var highways = new OpenLayers.Layer.ArcGIS93Rest("US Highways", "http://sampleserver1.arcgisonline.com/ArcGIS/rest/***REMOVED***s/Specialty/ESRI_StateCityHighway_USA/MapServer/export", {
		layers: "show:0",
		transparent:true,
		isBaseLayer:false
	});
	highways.setVisibility(false);
	
	var rivers = new OpenLayers.Layer.ArcGIS93Rest("US Rivers", "http://sampleserver1.arcgisonline.com/ArcGIS/rest/***REMOVED***s/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/export", {
		layers: "show:1",
		transparent:true,
		isBaseLayer:false
	});
	rivers.setVisibility(false);

		var agsstreet = new OpenLayers.Layer.ArcGIS93Rest("ESRI Street World","http://server.arcgisonline.com/ArcGIS/rest/***REMOVED***s/ESRI_StreetMap_World_2D/MapServer/export");
	agsstreet.params.FORMAT = "jpg";
	
	var agsimagery = new OpenLayers.Layer.ArcGIS93Rest("ESRI Imagery World","http://server.arcgisonline.com/ArcGIS/rest/***REMOVED***s/ESRI_Imagery_World_2D/MapServer/export");
	agsimagery.params.FORMAT = "jpg";


	
map.addLayers([agsstreet, agsimagery, gphy, gmap, ghyb, gsat, state, highways, rivers]);

	var mappanel = new GeoExt.MapPanel({
		title: 'SAGE Mapping Tool',
		map: map,
		center: '-98.07495117187,40.661773681641',
		zoom: 4,
		stateful: true,
		stateId: 'mappanel',
		dockedItems: [{
			xtype: 'toolbar',
			dock: 'top',
			items: [{
				text: 'Current center of the map',
				handler: function(){
					var c = GeoExt.panel.Map.guess().map.getCenter();
					Ext.Msg.alert(this.getText(), c.toString());
				}
			}]
		}]
	});
	
	
    new Ext.Viewport({
        layout: {
            type: 'border',
            padding: 5
        },
        defaults: {
            split: true
        },
        items: [{
            region: 'west',
            collapsible: false,
            //title: 'Starts at width 30%',
            split: true,
            width: '10%',
			splitterResize: false,
            //minWidth: 100,
            //minHeight: 140,
            items: []
        },{
            region: 'east',
            collapsible: false,
            //title: 'Starts at width 30%',
            split: true,
            width: '10%',
			splitterResize: false,
            //minWidth: 100,
            //minHeight: 140,
            items: []
        },{
            region: 'center',
			layout: 'fit',
			frame: false,
			border: true,
            items: [mappanel]
        }]
    });

    mapPanel = Ext.getCmp("mappanel");
});


</script>