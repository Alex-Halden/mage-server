<!DOCTYPE html>
<html ng-app="sage">
<head>
  <title>SAGE Map</title>
  <meta id="view" name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="leaf.ico"/>
  <link rel="stylesheet" href="css/leaflet.css" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet" href="css/bootstrap-responsive.min.css"/>
  <link rel="stylesheet" href="css/icomoon.css">
  <link rel="stylesheet" href="css/MarkerCluster.css">
  <link rel="stylesheet" href="css/MarkerCluster.Default.css">
  <!--[if IE 7]>
  <link rel="stylesheet" href="css/font-awesome-ie7.min.css">
  <![endif]-->
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/map.css"/>

  <!--<script type="text/javascript" src="js/bootstrap.min.js"></script>-->
  <script type="text/javascript" src="js/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="js/lib/underscore-min.js"></script>
  <script src="js/lib/leaflet/leaflet.js"></script>
  <script src="js/lib/leaflet/leaflet.markercluster-src.js"></script>
  <script type="text/javascript" src="js/lib/angular/angular.js"></script>
  <script type="text/javascript" src="js/lib/ui-bootstrap/ui-bootstrap-0.2.0.js"></script>
  <script type="text/javascript" src="js/lib/angular-leaflet-directive.js"></script>
  <script type="text/javascript" src="js/app/***REMOVED***s.js"></script>
  <script type="text/javascript" src="js/app/MapController.js"></script>
  <script type="text/javascript" src="js/app/directives/observation.js"></script>

  <link rel="apple-touch-icon" href="img/touch-icon-iphone.png" />
  <link rel="apple-touch-icon" sizes="72x72" href="img/touch-icon-ipad.png" />
  <link rel="apple-touch-icon" sizes="114x114" href="img/touch-icon-iphone-retina.png" />
  <link rel="apple-touch-icon" sizes="144x144" href="img/touch-icon-ipad-retina.png" />
</head>
<body ng-controller="MapController">
  <div cl***REMOVED***="navbar hidden-phone">
    <div cl***REMOVED***="navbar-inner">
      <div cl***REMOVED***="container">
        <a cl***REMOVED***="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span cl***REMOVED***="icon-bar"></span>
          <span cl***REMOVED***="icon-bar"></span>
          <span cl***REMOVED***="icon-bar"></span>
        </a>
        <a cl***REMOVED***="brand" href="/"><i cl***REMOVED***="icon-leaf icon-brand" style="margin-right:10px;"></i>SAGE</a>
        <div cl***REMOVED***="nav-collapse collapse">
          <ul cl***REMOVED***="nav">
            <li><a href="layers.html">Layer Manager</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div>
  
  <!-- The map directive -->
  <leaflet marker="marker" center="center" zoom="zoom" multimarkers="multiMarkers" layer="layer" message="message" draggable="true" observationid="observationId" newfeature="newFeature" currentlayerid="currentLayerId"></leaflet>

  <!-- The observation panel dialog, currently only works for looking at/editing points. Need to circle back around and get it tied in to work for creating points -->
  <div observation observationid="observationId" marker="marker" currentlayerid="currentLayerId" newfeature="newFeature" layers="layers"></div>
  
  <!-- layer picker button -->
  <button cl***REMOVED***="btn" id="settings" ng-click="openSettings()" ngm-tap="openSettings()"><i cl***REMOVED***="icon-layers icon-sage"></i></button>

  <!-- Button bar -->
  <div id="button-bar">
    <button cl***REMOVED***="btn" id="geo" ng-click="geolocate()" ngm-tap="geolocate()"><i cl***REMOVED***="icon-location icon-sage"></i></button>
    <button cl***REMOVED***="btn" id="goto-address" ng-click="openGotoAddress()" ngm-tap="openGotoAddress()"><i cl***REMOVED***="icon-search icon-sage"></i></button>
    <button cl***REMOVED***="btn" id="new-observation" ng-click="newObservation()" ngm-tap="newObservation()"><i cl***REMOVED***="icon-plus icon-sage"></i></button>
    <button cl***REMOVED***="btn" id="refresh-points" ng-click="refreshPoints()" ngm-tap="refreshPoints()"><i cl***REMOVED***="icon-download icon-sage"></i></button>
    <button cl***REMOVED***="btn" id="fft-btn" ng-click="fft()" ngm-tap="fft()"><i cl***REMOVED***="icon-group icon-sage"></i></button>
  </div>

  <!-- Panels -->
  <div id="settings-panel" cl***REMOVED***="hide panel panel-large">
    <form cl***REMOVED***="form">


      <h4>Base Layers</h4>
      <div cl***REMOVED***="control-group">
        <div cl***REMOVED***="controls">
          <select ng-model="baseLayer" ng-options="map.name for map in baseLayers"></select>
        </div>
      </div>

      <h4>Feature Layers</h4>
      <div cl***REMOVED***="control-group">
        <div cl***REMOVED***="controls">
          <label cl***REMOVED***="checkbox" ng-repeat="layer in featureLayers">
            <input type="checkbox" ng-model="layer.checked" ng-click="onFeatureLayer(layer)">{{layer.name}}
          </label>
        </div>
      </div>

      <h4>Imagery Layers</h4>
      <div cl***REMOVED***="control-group">
        <div cl***REMOVED***="controls">
          <label cl***REMOVED***="checkbox" ng-repeat="layer in imageryLayers">
            <input type="checkbox" ng-model="layer.checked" ng-click="onImageryLayer(layer)">{{layer.name}}
          </label>
        </div>
      </div>
    </form>
    <span>
      <button cl***REMOVED***="btn btn-mobile" ng-click="saveSettings()" ngm-tap="saveSettings()">Ok</button>
    </span>
  </div>

  <div id="goto-address-panel" cl***REMOVED***="hide panel panel-medium">
    <form cl***REMOVED***="form-horizontal">
      <div cl***REMOVED***="control-group">
        <label cl***REMOVED***="control-label" for="address">Go to Address</label>
        <div cl***REMOVED***="controls">
          <input ng-model="address"/>
        </div>
      </div>
      <span>
        <button cl***REMOVED***="btn btn-inverse" ng-click="dismissGotoAddress()" ngm-tap="dismissGotoAddress()">Cancel</button>
        <button cl***REMOVED***="btn" ng-click="gotoAddress()" ngm-tap="gotoAddress()">Go</button>
      </span>
    </form>
  </div>

  <div id="refresh-panel" cl***REMOVED***="hide panel panel-small">
    <i cl***REMOVED***="icon-spin icon-spinner icon-large"></i> Synchronizing
    <span>
      <button cl***REMOVED***="btn" ng-click="dismissRefresh()" ngm-tap="dismissRefresh()">Ok</button>
    </span>
  </div>

  <div id="fft-panel" cl***REMOVED***="hide panel panel-medium">
    <h3>Friendly Force Tracking</h3>
    <span>
      <button cl***REMOVED***="btn btn-inverse" ng-click="dismissFft()" ngm-tap="dismissFft()">Cancel</button>
      <button cl***REMOVED***="btn" ng-click="dismissFft()" ngm-tap="dismissFft()">Go</button>
    </span>
  </div>
</body>
</html>