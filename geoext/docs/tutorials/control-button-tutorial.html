<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Map Tool Tutorial &mdash; GeoExt v1.1</title>
    <link rel="stylesheet" href="../_static/geoext.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="GeoExt v1.1" href="../index.html" />
    <link rel="up" title="Tutorials" href="index.html" />
    <link rel="next" title="Vector Data Tutorial" href="remote-features-tutorial.html" />
    <link rel="prev" title="Layer Tree Tutorial" href="layertree-tutorial.html" />
    
    
    
    
    

  </head>
  <body>
    <div cl***REMOVED***="header">
        <div cl***REMOVED***="wrap">
            <h1 id="logo"><a href="../index.html">GeoExt</a></h1>
            <ul id="top-nav">
                <li cl***REMOVED***="first"><a href="../docs.html">Documentation</a></li>
                <li><a href="../examples.html">Examples</a></li>
                <li><a href="../downloads.html">Download</a></li>
                <li><a href="http://trac.geoext.org/">Development</a></li>
            </ul>
            <div id="searchbox">
                <form cl***REMOVED***="search" action="../search.html" method="get">
                    <input id="searchbox-query" type="text" name="q" size="25" value="Search &hellip;" tabindex="3" onblur="if(this.value=='') this.value='Search &hellip;';" onfocus="if(this.value=='Search &hellip;') this.value='';" />
                    <input id="searchbox-submit" type="image" value="Search" src="../_static/img/search_icon_green.png" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                </form>
            </div>
        </div>
    </div>

    <div cl***REMOVED***="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="../index.html">GeoExt</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Tutorials</a> &raquo;</li>
        <li><a href="#">Map Tool Tutorial</a></li>
      </ul>
    </div>

      <div cl***REMOVED***="sphinxsidebar">
        <div cl***REMOVED***="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a cl***REMOVED***="reference external" href="#">Map Tool Tutorial</a><ul>
<li><a cl***REMOVED***="reference external" href="#openlayers-controls">OpenLayers Controls</a></li>
<li><a cl***REMOVED***="reference external" href="#extjs-buttons">ExtJS Buttons</a></li>
<li><a cl***REMOVED***="reference external" href="#there-can-be-only-one">There Can Be Only One</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p cl***REMOVED***="topless"><a href="layertree-tutorial.html"
                                  title="previous chapter">Layer Tree Tutorial</a></p>
            <h4>Next topic</h4>
            <p cl***REMOVED***="topless"><a href="remote-features-tutorial.html"
                                  title="next chapter">Vector Data Tutorial</a></p>
        </div>
      </div>


    <div cl***REMOVED***="document">
      <div cl***REMOVED***="documentwrapper">
        <div cl***REMOVED***="bodywrapper">
          <div cl***REMOVED***="body">
            
  <div cl***REMOVED***="section" id="map-tool-tutorial">
<h1>Map Tool Tutorial<a cl***REMOVED***="headerlink" href="#map-tool-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Okay, so now you know how to <a cl***REMOVED***="reference external" href="mappanel-tutorial.html"><em>add a map to a web page</em></a>
and load some data into it. Your users can drag and zoom to their hearts&#8217;
content. You even followed the <a cl***REMOVED***="reference external" href="layertree-tutorial.html"><em>Layer Tree Tutorial</em></a> so they could switch
between different datasets. (You did follow that tutorial, right?) But now you
want to do more than just view some pretty pictures. You want to let your users
analyze data, or get more info about particular features on your map, or just
draw things. Basically, you want to give them some <strong>tools</strong>.</p>
<div cl***REMOVED***="admonition note">
<p cl***REMOVED***="first admonition-title">Note</p>
<p cl***REMOVED***="last">This tutorial makes heavy use of the OpenLayers mapping library.  If
you&#8217;re not familiar with it, you might want to take a look at the
<a cl***REMOVED***="reference external" href="../primers/openlayers-primer.html"><em>Primer: OpenLayers</em></a> before moving forward.</p>
</div>
<div cl***REMOVED***="section" id="openlayers-controls">
<h2>OpenLayers Controls<a cl***REMOVED***="headerlink" href="#openlayers-controls" title="Permalink to this headline">¶</a></h2>
<p>In <a cl***REMOVED***="reference external" href="http://openlayers.org/">OpenLayers</a>, these tools for interacting with a
map are called <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Controls</span></tt>. For the purposes of this tutorial, we&#8217;ll just
stick to the <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Measure</span></tt> control, a handy little tool that lets you draw a line
on the map and tells you its length in real-world units.</p>
<div cl***REMOVED***="admonition-see-also admonition seealso">
<p cl***REMOVED***="first admonition-title">See also</p>
<p cl***REMOVED***="last">The OpenLayer API documentation for a comprehensive listing of standard controls.</p>
</div>
</div>
<div cl***REMOVED***="section" id="extjs-buttons">
<h2>ExtJS Buttons<a cl***REMOVED***="headerlink" href="#extjs-buttons" title="Permalink to this headline">¶</a></h2>
<p>While OpenLayers <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Control</span></tt>s provide a number of excellent ways of
interacting with maps, they have only limited support for actually manipulating
the controls; ie, choosing which tool to use and providing user feedback about
which tool is active. ExtJS provides a richer array of options for managing
tools. Here is the idiomatic way to create an <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Ext.Button</span></tt> which activates and
deactivates an OpenLayers <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Control</span></tt>, and stays depressed while the control
is active:</p>
<div cl***REMOVED***="highlight-javascript"><div cl***REMOVED***="highlight"><pre><span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">control</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Control</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Measure</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Handler</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Path</span><span cl***REMOVED***="p">,</span> <span cl***REMOVED***="p">{</span>
    <span cl***REMOVED***="nx">eventListeners</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="p">{</span>
        <span cl***REMOVED***="nx">measure</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">alert</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="s2">&quot;The measurement was &quot;</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">measure</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">units</span><span cl***REMOVED***="p">);</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>

<span cl***REMOVED***="nx">mapPanel</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">map</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">addControl</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">control</span><span cl***REMOVED***="p">);</span>
<span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">button</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">Ext</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Button</span><span cl***REMOVED***="p">({</span>
    <span cl***REMOVED***="nx">text</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="s1">&#39;Measure Things&#39;</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">enableToggle</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kc">true</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">handler</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">){</span>
        <span cl***REMOVED***="k">if</span> <span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">control</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">activate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span> <span cl***REMOVED***="k">else</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">control</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">deactivate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>
</pre></div>
</div>
<p>The <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Button</span></tt> can be added to an ExtJS toolbar or to a panel, in whatever
layout we choose. For example, you could add the button to a <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">MapPanel</span></tt>&#8216;s
top toolbar:</p>
<div cl***REMOVED***="highlight-javascript"><div cl***REMOVED***="highlight"><pre><span cl***REMOVED***="nx">mapPanel</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">getTopToolbar</span><span cl***REMOVED***="p">().</span><span cl***REMOVED***="nx">addButton</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">button</span><span cl***REMOVED***="p">);</span>
</pre></div>
</div>
</div>
<div cl***REMOVED***="section" id="there-can-be-only-one">
<h2>There Can Be Only One<a cl***REMOVED***="headerlink" href="#there-can-be-only-one" title="Permalink to this headline">¶</a></h2>
<p>In general, when you have multiple tools ***REMOVED***ociated with a map, you want to
avoid having more than one tool active at the same time. It would be somewhat
confusing if the user starts deleting data while he or she is trying to find the
distance from one end of town to the other! Fortunately, ExtJS makes it very
simple to ensure that only one toggle button from a group is toggled at a time,
through the <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">toggleGroup</span></tt> property of the <tt cl***REMOVED***="docutils literal"><span cl***REMOVED***="pre">Button</span></tt> object. This is a string
identifying a group of buttons, only one of which can be pressed at a time.
Let&#8217;s extend our example from before, this time adding the option to measure
area instead of length:</p>
<div cl***REMOVED***="highlight-javascript"><div cl***REMOVED***="highlight"><pre><span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">length</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Control</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Measure</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Handler</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Path</span><span cl***REMOVED***="p">,</span> <span cl***REMOVED***="p">{</span>
    <span cl***REMOVED***="nx">eventListeners</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="p">{</span>
        <span cl***REMOVED***="nx">measure</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">alert</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="s2">&quot;The length was &quot;</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">measure</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">units</span><span cl***REMOVED***="p">);</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>

<span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">area</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Control</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Measure</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">OpenLayers</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Handler</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Polygon</span><span cl***REMOVED***="p">,</span> <span cl***REMOVED***="p">{</span>
    <span cl***REMOVED***="nx">eventListeners</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="p">{</span>
        <span cl***REMOVED***="nx">measure</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">alert</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="s2">&quot;The area was &quot;</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">measure</span> <span cl***REMOVED***="o">+</span> <span cl***REMOVED***="nx">evt</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">units</span><span cl***REMOVED***="p">);</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>

<span cl***REMOVED***="nx">mapPanel</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">map</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">addControl</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">length</span><span cl***REMOVED***="p">);</span>
<span cl***REMOVED***="nx">mapPanel</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">map</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">addControl</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">area</span><span cl***REMOVED***="p">);</span>

<span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">toggleGroup</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="s2">&quot;measure controls&quot;</span><span cl***REMOVED***="p">;</span>

<span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">lengthButton</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">Ext</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Button</span><span cl***REMOVED***="p">({</span>
    <span cl***REMOVED***="nx">text</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="s1">&#39;Measure Length&#39;</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">enableToggle</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kc">true</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">toggleGroup</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="nx">toggleGroup</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">handler</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">){</span>
        <span cl***REMOVED***="k">if</span> <span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">length</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">activate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span> <span cl***REMOVED***="k">else</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">length</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">deactivate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>

<span cl***REMOVED***="kd">var</span> <span cl***REMOVED***="nx">area</span> <span cl***REMOVED***="o">=</span> <span cl***REMOVED***="k">new</span> <span cl***REMOVED***="nx">Ext</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">Button</span><span cl***REMOVED***="p">({</span>
    <span cl***REMOVED***="nx">text</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="s1">&#39;Measure Area&#39;</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">enableToggle</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kc">true</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">toggleGroup</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="nx">toggleGroup</span><span cl***REMOVED***="p">,</span>
    <span cl***REMOVED***="nx">handler</span><span cl***REMOVED***="o">:</span> <span cl***REMOVED***="kd">function</span><span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">){</span>
        <span cl***REMOVED***="k">if</span> <span cl***REMOVED***="p">(</span><span cl***REMOVED***="nx">toggled</span><span cl***REMOVED***="p">)</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">area</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">activate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span> <span cl***REMOVED***="k">else</span> <span cl***REMOVED***="p">{</span>
            <span cl***REMOVED***="nx">area</span><span cl***REMOVED***="p">.</span><span cl***REMOVED***="nx">deactivate</span><span cl***REMOVED***="p">();</span>
        <span cl***REMOVED***="p">}</span>
    <span cl***REMOVED***="p">}</span>
<span cl***REMOVED***="p">});</span>
</pre></div>
</div>
<p>All right, you&#8217;ve got all you need to add and activate tools to help users get
the most out of your maps.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div cl***REMOVED***="clearer"></div>
    </div>
    <div cl***REMOVED***="related">
      <h3>Navigation</h3>
      <ul>
            <li cl***REMOVED***="right" style="margin-right: 10px">
              <a href="../genindex.html" title="General Index"
                 accesskey="I">index</a></li>
            <li cl***REMOVED***="right" >
              <a href="../modindex.html" title="Global Module Index"
                 accesskey="M">modules</a> |</li>
            <li cl***REMOVED***="right" >
              <a href="remote-features-tutorial.html" title="Vector Data Tutorial"
                 accesskey="N">next</a> |</li>
            <li cl***REMOVED***="right" >
              <a href="layertree-tutorial.html" title="Layer Tree Tutorial"
                 accesskey="P">previous</a> |</li>
        <li><a href="../index.html">GeoExt</a> &raquo;</li>
          <li><a href="index.html" >Tutorials</a> &raquo;</li>
        <li><a href="#">Map Tool Tutorial</a></li>
      </ul>
    </div>

    <div cl***REMOVED***="footer">
      &copy; Copyright 2009-2010, GeoExt Community.
    </div>
  </body>
</html>